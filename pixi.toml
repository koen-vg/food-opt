# SPDX-FileCopyrightText: 2025 Koen van Greevenbroek
#
# SPDX-License-Identifier: CC-BY-4.0

[workspace]
name = "food-opt"
version = "0.1.0"
description = "Global food systems optimization model combining environmental and nutritional needs"
channels = ["conda-forge"]
platforms = ["linux-64"]

[environments]
default = { solve-group = "default" }
dev = { features = ["dev"], solve-group = "default" }
gurobi = { features = ["gurobi"], solve-group = "default" }
dev-gurobi = { features = ["dev", "gurobi"], solve-group = "default" }

[dependencies]
python = ">=3.12,<3.13"
seaborn = "*"
numpy = "*"
pandas = ">=2.1"
matplotlib = "*"
cartopy = "*"
networkx = "*"
geopandas = "*"
shapely = ">=2.1"
rasterio = "*"
scikit-learn = ">=1.4"
xlrd = ">=2.0.1"
openpyxl = ">=3.1.5"
requests = "*"
graphviz = "*"
pycountry = ">=24.6.1"
curl = "*"
wget = "*"
gdal = "*"

# PyPI-only or git dependencies
[pypi-dependencies]
snakemake = ">=9.0"
linopy = { git = "https://github.com/coroa/linopy.git", branch = "feat/add-sos-constraints" }
pypsa = { git = "https://github.com/koen-vg/PyPSA.git", branch = "food-opt" }
exactextract = "*"
highspy = "*"
snakemake-storage-plugin-http = "*"
faostat = "*"
gsutil = ">=5.35"
ecmwf-datastores-client = "*"

[feature.gurobi.pypi-dependencies]
gurobipy = "*"

[feature.dev.dependencies]
jupyter = "*"
ipython = "*"
pre-commit = "*"
ruff = "*"
sphinx = ">=8.1.3"
sphinx-autodoc-typehints = ">=3.0.1"
furo = "*"
pydot = ">=3.0.0"

[tasks]
smk = { cmd = "tools/smk" }
lint = { cmd = "ruff check ." }
format = { cmd = "ruff format ." }
docs = { cmd = "sphinx-build -b html docs docs/_build/html" }
